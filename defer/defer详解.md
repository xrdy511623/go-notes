
---
defer详解
---

由于defer语句延迟调用的特性，所以defer语句能非常方便的处理资源释放问题。比如：资源清理、文件关闭、解锁、
关闭连接及记录时间等。
defer执行的时机
在Go语言的函数中return语句在底层并不是原子操作，它分为给返回值赋值和RET指令两步。而defer语句执行的时机就在返回值
赋值操作后，RET指令执行前。
也就是:
返回值=x
执行defer语句
ret指令返回x

未命名的返回值，defer中对返回值的操作指向不同的内存地址
命名且同名的返回值，defer中对返回值的操作指向相同的内存地址

多个defer语句，按照先进后出的顺序执行，也就是先被defer的语句最后被执行，最后被defer的语句，最先被执行。